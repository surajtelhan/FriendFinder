<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>We Go - Changed</title>

    <!-- Bootstrap -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">

    <link rel="stylesheet" href="css/survey.css" />
</head>

<body>

    <div class="container">

        <h2>Survey Questions</h2>
        <hr>

        <h3><strong>Share Your Details</strong></h3>
        <h4>Name (Required)</h4>
        <input type="text" id="name" class="form-control" required>

        <h4>Link to Photo Image (Required)</h4>
        <input type="text" id="photo" class="form-control" required>

        <hr>

        <h3><strong>Question 1</strong></h3>
        <h4>I enjoy outdoor recreational activities (hiking, camping, mountain biking).</h4>
        <div class="radio">
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ1" value=1>1 (Not
                really)</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ1" value=2>2</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ1" value=3>3</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ1" value=4>4</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ1" value=5>5 (Very
                much)</label>
        </div>


        <h3><strong>Question 2</strong></h3>
        <h4>I enjoy outdoor sporting activities (hunting, fishing, trapping).</h4>
        <div class="radio">
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ2" value=1>1 (Not
                really)</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ2" value=2>2</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ2" value=3>3</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ2" value=4>4</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ2" value=5>5 (Very
                much)</label>
        </div>


        <h3><strong>Question 3</strong></h3>
        <h4>I enjoy attending collegiate/professional sporting events.</h4>
        <div class="radio">
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ3" value=1>1 (Not
                really)</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ3" value=2>2</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ3" value=3>3</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ3" value=4>4</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ3" value=5>5 (Very
                much)</label>
        </div>


        <h3><strong>Question 4</strong></h3>
        <h4>I enjoy recreational and intramural sports.</h4>
        <div class="radio">
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ4" value=1>1 (Not
                really)</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ4" value=2>2</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ4" value=3>3</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ4" value=4>4</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ4" value=5>5 (Very
                much)</label>
        </div>


        <h3><strong>Question 5</strong></h3>
        <h4>I enjoy attending fine arts performances (operas, ballets, theater)</h4>
        <div class="radio">
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ5" value=1>1 (Not
                really)</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ5" value=2>2</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ5" value=3>3</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ5" value=4>4</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ5" value=5>5 (Very
                much)</label>
        </div>


        <h3><strong>Question 6</strong></h3>
        <h4>I enjoy attending small venue shows (music, comedy)</h4>
        <div class="radio">
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ6" value=1>1 (Not
                really)</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ6" value=2>2</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ6" value=3>3</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ6" value=4>4</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ6" value=5>5 (Very
                much)</label>
        </div>


        <h3><strong>Question 7</strong></h3>
        <h4>I enjoy attending large production shows (concerts, festivals)</h4>
        <div class="radio">
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ7" value=1>1 (Not
                really)</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ7" value=2>2</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ7" value=3>3</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ7" value=4>4</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ7" value=5>5 (Very
                much)</label>
        </div>


        <h3><strong>Question 8</strong></h3>
        <h4>I enjoy sampling the culinary arts (fine dining, cooking)</h4>
        <div class="radio">
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ8" value=1>1 (Not
                really)</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ8" value=2>2</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ8" value=3>3</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ8" value=4>4</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ8" value=5>5 (Very
                much)</label>
        </div>


        <h3><strong>Question 9</strong></h3>
        <h4>I enjoy outings center on bars and clubs (dancing, karioke, drinking)</h4>
        <div class="radio">
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ9" value=1>1 (Not
                really)</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ9" value=2>2</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ9" value=3>3</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ9" value=4>4</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ9" value=5>5 (Very
                much)</label>
        </div>


        <h3><strong>Question 10</strong></h3>
        <h4>I enjoy computer or console based gaming</h4>
        <div class="radio">
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ10" value=1>1 (Not
                really)</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ10" value=2>2</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ10" value=3>3</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ10" value=4>4</label>
            <label class="radioLabels"><input type="radio" class="radio-inline" name="optradioQ10" value=5>5 (Very
                much)</label>
        </div>

        <br>
        <br>

        <!-- Submit Button -->
        <button type="submit" class="btn btn-success btn-lg btn-block" id="submit"><i class="fa fa-check-circle"></i>
            Submit</button>

        <hr>
        <footer class="footer">
            <div class="container">
                <p><a href="/api/friends">API Friends List</a> | <a href="https://github.com/Steven-M-Carpenter/FriendFinder">GitHub
                        Repo</a> | <a href="/">Home Page</a></p>
            </div>
        </footer>

    </div>

    <!-- Friend Found Modal -->
    <div id="results-modal" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h2 class="modal-purpose"><strong>Best Match</strong></h2>
                </div>
                <div class="modal-body">
                    <h2 id="match-name"></h2>
                    <img id="match-img" src="https://picsum.photos/200/300/?random" alt="">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>


    <!-- Error Modal -->
    <div id="error-modal" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h2 id="error-alert" class="modal-title"><strong>Error</strong></h2>
                </div>
                <div class="modal-body">
                    <h2 id="error-title">Incomplete Survey</h2>
                    <p id="error-msg">Please provide a value for all inputs and questions before submitting</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

</body>

<script>
// Detect when the submit button is clicked
//---------------------------------------------------------
    $("#submit").on("click", function (event) {
        event.preventDefault();
// Declare function to make sure values are supplied for text fields
//----------------------------------------------------------------------
        function validateInput() {
            var Valid = true;
            $(".form-control").each(function () {
                if ($(this).val() === "") {
                    Valid = false;
                }
            });
            for (var i = 1; i < 11; i++) {
                if (!$('input[name=optradioQ' + i + ']:checked').val()) {
                    Valid = false;
                };
            };
            return Valid;
        }
        var complete = validateInput();
// If any value is not supplied, display an error
//----------------------------------------------------------------------
        if (complete === false) {
            $("#error-modal").modal("toggle");
        }
// Process the collection of answers
//----------------------------------------------------------------------
        else {
            var ans1 = $('input[name=optradioQ1]:checked').val();
            var ans2 = $('input[name=optradioQ2]:checked').val();
            var ans3 = $('input[name=optradioQ3]:checked').val();
            var ans4 = $('input[name=optradioQ4]:checked').val();
            var ans5 = $('input[name=optradioQ5]:checked').val();
            var ans6 = $('input[name=optradioQ6]:checked').val();
            var ans7 = $('input[name=optradioQ7]:checked').val();
            var ans8 = $('input[name=optradioQ8]:checked').val();
            var ans9 = $('input[name=optradioQ9]:checked').val();
            var ans10 = $('input[name=optradioQ10]:checked').val();
// Process the collection of answers
//----------------------------------------------------------------------
                var userData = {
                name: $("#name").val(),
                photo: $("#photo").val(),
                scores: [
                    parseInt(ans1),
                    parseInt(ans2),
                    parseInt(ans3),
                    parseInt(ans4),
                    parseInt(ans5),
                    parseInt(ans6),
                    parseInt(ans7),
                    parseInt(ans8),
                    parseInt(ans9),
                    parseInt(ans10)
                ]
            };
// Send the data to the modal and display 
//----------------------------------------------------------------------
            $.post("/api/friends", userData, function (data) {
                $("#match-name").text(data.name);
                $("#match-img").attr("src", data.photo);
                $("#results-modal").modal("toggle");
            });
        }
    });
</script>

</html>